---
title: '【Ruby】コメントアウト'
date: '2024-01-29'
tags: ['HTML', 'Ruby', 'Rails', 'RubyonRails', 'Cloud9']
excerpt: 'RubyとRailsにおけるコメントアウトの種類と使用方法について解説します'
---

コメントアウトできない、どうやるんだっけという質問をちょくちょく受けるので、自分自身のアウトプットがてら、少しまとめておこうと思います。

## 環境
- OS: Windows
- IDE: Cloud9

## コメントアウトとは
**コメント**、**コメントアウト**とは、プログラム内にコードとは異なる目的で書かれるもので、実行時には無視されるものです。コードの意図や動作を他の開発者に伝えるための注釈や説明文として使われます。また、特定のコードを一時的に無効化し、実行から除外するためにも使用されます。

## 種類
**Ruby**におけるコメント、コメントアウトの主な記法は以下の2種類です。
```ruby
#(シャープ)
=beginで始めて＝endで終わる
```
単一行のコメントか、複数行のコメントアウトかというところですね。
加えて、以下のような**HTML**などで使われるコメントアウトの記法も挙げておきます。
```html
<!---->
```
では順にみていきましょう。

## 記述法
Rubyにおけるコメントやコメントアウトの使い分けについて説明します。

### #(シャープ)
まず、`#`は単一行コメントを表します。この記号の後ろに来るテキストはすべて、その行の終わりまで**コメント**と見なされます。これは**1行だけ**のコメントを追加する際に使われます。
```ruby
# これは単一行コメントです。
puts "Tarou" # Tarouと出力する。これも単一行コメントです。
```

### =begin  ＝end
次に、`=begin`と`=end`を使った**コメントアウト**です。これは**複数行**のコメントを記述する際に使用されます。`=begin`で始まり、`=end`で終わるまでの間に入るすべての行がコメントとして扱われます。
```ruby
=begin
これは複数行の
コメントアウトです
=end
```

### `<!---->`
さらに、**HTML**や一部のプログラミング言語では、`<!-- -->`という記法で**コメントアウト**を行います。この間に入るテキストはコードとして認識されないため、実行時には無視されます。
```html
<!-- これはHTMLのコメントアウトです -->
<p>これは普通のテキストです</p>
```

> **Note**
> コメントアウトしたい行の頭にカーソルを合わせて、Macなら`command⌘ + /`を、Windowsなら`Ctrl + /`を押すとコメントアウトされます。またもう一度あたまで同じショートカットキーを押すとコメントアウトは解除され、元に戻ります。

## 使用例を少し
例えばモデルファイルでコメントを書きたいとき。モデルファイルは`.rb`、Rubyですね。
ということは、単一行なら`#`、複数行なら`=begin` `=end`です。

```ruby
# models/post.rb
class Post < ApplicationRecord
  =begin
  belongs_to :user
  has_many :favorites, dependent: :destroy
  has_many :post_comments, dependent: :destroy
  =end

  # タイトルが存在すること
  validates :title, presence: true
  # 本文が存在すること、200文字以下であること
  validates :body,presence:true,length:{maximum:200}
end
```

次はビューファイルでの使用例。ファイルが`.html.erb`の場合。これはRuby on Railsで使われるファイル形式、RubyとHTML両方の記法を含むものです。
例えば、エラー等で一時的に特定の記述を無効化したい、コメントアウトしたいという場合は以下のようになります。

```erb
# views/posts/index.html.erb
<%= post.user.name %>
<!--<%= post.title %>--> # まずHtmlの記法でコメントアウト
<!--<%#= post.body %>--> # 次に、%のうしろに#を追加
# これで8行目は実行時に除外されます。
```

## さいごに
僕も最初、コメントアウトがうまくいかず確認ができないで困っていた時がありました。コメント、コメントアウトは、付け方や付ける位置によってさらにエラーが発生することもありますし、適した記法でなければうまくいかないのではじめはむずかしいところもありますよね。
書き方、使い方様々で案外興味深いです。